<?xml version="1.0" encoding="utf-8"?>
<TestSuite
	xmlns:tei="http://www.tei-c.org/ns/1.0"
	xmlns:j="http://jewishliturgy.org/ns/jlptei/1.0"
	xmlns:jx="http://jewishliturgy.org/ns/jlp-processor"
  xmlns:http="http://expath.org/ns/http-client">
	<suiteName>data index</suiteName>
	<description>
		<p>Test the data index API</p>
		<author>Efraim Feinstein</author>
	</description>
	<setup/>
  <namespace prefix="html">http://www.w3.org/1999/xhtml</namespace>
	<imports>
    import module namespace paths="http://jewishliturgy.org/modules/paths" 
      at "xmldb:exist:///code/modules/paths.xqm";
    import module namespace apitest="http://jewishliturgy.org/modules/apitest"
      at "xmldb:exist:///code/tests/api/apitest.xqm";
	</imports>
	<TestSet>
		<testName>GET</testName>
		<setup/>
		<imports>
    </imports>
		<functions>
		</functions>
		<tearDown/>
		<test>
			<task>GET with OK accept header</task>
			<code><![CDATA[
        apitest:get("/code/api/data", <header name="Accept" value="application/xhtml+xml"/>)
			]]></code>
      <class href="search-results.t.xml#SelfConsistentMenu"/> 
      <class href="search-results.t.xml#Testing"/> 
		</test>
		<test>
			<task>PUT</task>
			<code><![CDATA[
        apitest:put("/code/api/data", (), <x/>)
			]]></code>
      <class href="search-results.t.xml#InvalidMethod"/> 
		</test>
		<test>
			<task>POST</task>
			<code><![CDATA[
        apitest:post("/code/api/data", (), <x/>)
			]]></code>
      <class href="search-results.t.xml#InvalidMethod"/> 
		</test>
		<test>
			<task>DELETE</task>
			<code><![CDATA[
        apitest:delete("/code/api/data", ())
			]]></code>
      <class href="search-results.t.xml#InvalidMethod"/> 
		</test>
    
  </TestSet>
</TestSuite>
